(function(x,H){function C(a){return"function"===typeof a}function S(){}function T(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function M(a){var b=a._promiseCallbacks;b||(b=a._promiseCallbacks={});return b}function U(a,b){if("onerror"===a)h.on("error",b);else if(2===arguments.length)h[a]=b;else return h[a]}function ma(){setTimeout(function(){for(var a,b=0;b<I.length;b++){a=I[b];var c=a.payload;c.guid=c.key+c.id;c.childGuid=c.key+c.childId;c.error&&(c.stack=c.error.stack);h.trigger(a.name,
a.payload)}I.length=0},50)}function r(){}function na(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function oa(a,b,c){h.async(function(a){var e=!1,f=na(c,b,function(c){e||(e=!0,b!==c?p(a,c):n(a,c))},function(b){e||(e=!0,m(a,b))},"Settle: "+(a._label||" unknown promise"));!e&&f&&(e=!0,m(a,f))},a)}function pa(a,b){1===b._state?n(a,b._result):2===b._state?(b._onError=null,m(a,b._result)):J(b,void 0,function(c){b!==c?p(a,c):n(a,c)},function(b){m(a,b)})}function p(a,b){if(a===b)n(a,b);else if("function"===
typeof b||"object"===typeof b&&null!==b)if(b.constructor===a.constructor)pa(a,b);else{var c;try{c=b.then}catch(d){K.error=d,c=K}c===K?m(a,K.error):void 0===c?n(a,b):C(c)?oa(a,b,c):n(a,b)}else n(a,b)}function qa(a){a._onError&&a._onError(a._result);N(a)}function n(a,b){void 0===a._state&&(a._result=b,a._state=1,0===a._subscribers.length?h.instrument&&D("fulfilled",a):h.async(N,a))}function m(a,b){void 0===a._state&&(a._state=2,a._result=b,h.async(qa,a))}function J(a,b,c,d){var e=a._subscribers,f=e.length;
a._onError=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a._state&&h.async(N,a)}function N(a){var b=a._subscribers,c=a._state;h.instrument&&D(1===c?"fulfilled":"rejected",a);if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?V(c,d,e,f):e(f);a._subscribers.length=0}}function W(){this.error=null}function V(a,b,c,d){var e=C(c),f,g,h,l;if(e){try{f=c(d)}catch(k){O.error=k,f=O}f===O?(l=!0,g=f.error,f=null):h=!0;if(b===f){m(b,new TypeError("A promises callback cannot return that same promise."));
return}}else f=d,h=!0;void 0===b._state&&(e&&h?p(b,f):l?m(b,g):1===a?n(b,f):2===a&&m(b,f))}function ra(a,b){var c=!1;try{b(function(b){c||(c=!0,p(a,b))},function(b){c||(c=!0,m(a,b))})}catch(d){m(a,d)}}function X(a,b,c){return 1===a?{state:"fulfilled",value:c}:{state:"rejected",reason:c}}function k(a,b,c,d){this._instanceConstructor=a;this.promise=new a(r,d);this._abortOnReject=c;this._validateInput(b)?(this._input=b,this._remaining=this.length=b.length,this._init(),0===this.length?n(this.promise,
this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&n(this.promise,this._result))):m(this.promise,this._validationError())}function q(a,b){this._id=sa++;this._label=b;this._result=this._state=void 0;this._subscribers=[];h.instrument&&D("created",this);if(r!==a){if(!C(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof q))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
ra(this,a)}}function E(a,b,c){this._superConstructor(a,b,!1,c)}function ta(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate);return function(){a(F)}}function ua(){return function(){Y(F)}}function va(){var a=0,b=new Z(F),c=H.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function wa(){var a=new MessageChannel;a.port1.onmessage=F;return function(){a.port2.postMessage(0)}}
function aa(){return function(){setTimeout(F,1)}}function F(){for(var a=0;a<w;a+=2)(0,y[a])(y[a+1]),y[a]=void 0,y[a+1]=void 0;w=0}function xa(){try{var a=require("vertx");Y=a.runOnLoop||a.runOnContext;return ua()}catch(b){return aa()}}function t(a,b,c){this._superConstructor(a,b,!0,c)}function G(a,b,c){this._superConstructor(a,b,!1,c)}function ba(){this.value=void 0}function ca(a,b,c){try{a.apply(b,c)}catch(d){return z.value=d,z}}function ya(a,b){return{then:function(c,d){return a.call(b,c,d)}}}function za(a,
b,c,d){b=ca(c,d,b);b===z&&m(a,b.value);return a}function Aa(a,b,c,d){return l.all(b).then(function(b){b=ca(c,d,b);b===z&&m(a,b.value);return a})}function da(){h.on.apply(h,arguments)}var P=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},ea=Date.now||function(){return(new Date).getTime()},A=Object.create||function(a){if(1<arguments.length)throw Error("Second argument not supported");if("object"!==typeof a)throw new TypeError("Argument must be an object");
S.prototype=a;return new S},fa={mixin:function(a){a.on=this.on;a.off=this.off;a.trigger=this.trigger;a._promiseCallbacks=void 0;return a},on:function(a,b){if("function"!==typeof b)throw new TypeError("Callback must be a function");var c=M(this),d;(d=c[a])||(d=c[a]=[]);-1===T(d,b)&&d.push(b)},off:function(a,b){var c=M(this),d;b?(c=c[a],d=T(c,b),-1!==d&&c.splice(d,1)):c[a]=[]},trigger:function(a,b,c){var d;if(a=M(this)[a])for(var e=0;e<a.length;e++)d=a[e],d(b,c)}},h={instrument:!1};fa.mixin(h);var I=
[],D=function(a,b,c){1===I.push({name:a,payload:{key:b._guidKey,id:b._id,eventName:a,detail:b._result,childId:c&&c._id,label:b._label,timeStamp:ea(),error:h["instrument-with-stack"]?Error(b._label):null}})&&ma()},K=new W,O=new W;k.prototype._validateInput=function(a){return P(a)};k.prototype._validationError=function(){return Error("Array Methods must be provided an Array")};k.prototype._init=function(){this._result=Array(this.length)};k.prototype._enumerate=function(){for(var a=this.length,b=this.promise,
c=this._input,d=0;void 0===b._state&&d<a;d++)this._eachEntry(c[d],d)};k.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;"object"===typeof a&&null!==a?a.constructor===c&&void 0!==a._state?(a._onError=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(1,b,a))};k.prototype._settledAt=function(a,b,c){var d=this.promise;void 0===d._state&&(this._remaining--,this._abortOnReject&&2===a?m(d,c):this._result[b]=
this._makeResult(a,b,c));0===this._remaining&&n(d,this._result)};k.prototype._makeResult=function(a,b,c){return c};k.prototype._willSettleAt=function(a,b){var c=this;J(a,void 0,function(a){c._settledAt(1,b,a)},function(a){c._settledAt(2,b,a)})};var u=function(a,b){if(a&&"object"===typeof a&&a.constructor===this)return a;var c=new this(r,b);p(c,a);return c},B="rsvp_"+ea()+"-",sa=0,l=q;q.cast=u;q.all=function(a,b){return(new k(this,a,!0,b)).promise};q.race=function(a,b){function c(a){p(e,a)}function d(a){m(e,
a)}var e=new this(r,b);if(!P(a))return m(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;void 0===e._state&&g<f;g++)J(this.resolve(a[g]),void 0,c,d);return e};q.resolve=u;q.reject=function(a,b){var c=new this(r,b);m(c,a);return c};q.prototype={constructor:q,_guidKey:B,_onError:function(a){var b=this;h.after(function(){b._onError&&h.trigger("error",a,b._label)})},then:function(a,b,c){var d=this._state;if(1===d&&!a||2===d&&!b)return h.instrument&&D("chained",this,this),
this;this._onError=null;var e=new this.constructor(r,c),f=this._result;h.instrument&&D("chained",this,e);if(d){var g=arguments[d-1];h.async(function(){V(d,e,g,f)})}else J(this,e,a,b);return e},"catch":function(a,b){return this.then(void 0,a,b)},"finally":function(a,b){var c=this.constructor;return this.then(function(b){return c.resolve(a()).then(function(){return b})},function(b){return c.resolve(a()).then(function(){throw b;})},b)}};E.prototype=A(k.prototype);E.prototype._superConstructor=k;E.prototype._makeResult=
X;E.prototype._validationError=function(){return Error("allSettled must be called with an array")};var w=0,Y,B=(u="undefined"!==typeof x?x:void 0)||{},Z=B.MutationObserver||B.WebKitMutationObserver,B="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process),Ba="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,y=Array(1E3),ga;ga=B?ta():Z?va():Ba?wa():void 0===u&&"function"===typeof require?xa():
aa();t.prototype=A(k.prototype);t.prototype._superConstructor=k;t.prototype._init=function(){this._result={}};t.prototype._validateInput=function(a){return a&&"object"===typeof a};t.prototype._validationError=function(){return Error("Promise.hash must be called with an object")};t.prototype._enumerate=function(){var a=this.promise,b=this._input,c=[],d;for(d in b)void 0===a._state&&Object.prototype.hasOwnProperty.call(b,d)&&c.push({position:d,entry:b[d]});this._remaining=b=c.length;for(var e=0;void 0===
a._state&&e<b;e++)d=c[e],this._eachEntry(d.entry,d.position)};G.prototype=A(t.prototype);G.prototype._superConstructor=k;G.prototype._makeResult=X;G.prototype._validationError=function(){return Error("hashSettled must be called with an object")};var z=new ba,ha=new ba;if("object"===typeof self)A=self;else if("object"===typeof global)A=global;else throw Error("no global: `self` or `global` found");h.async=function(a,b){y[w]=a;y[w+1]=b;w+=2;2===w&&ga()};h.after=function(a){setTimeout(a,0)};if("undefined"!==
typeof x&&"object"===typeof x.__PROMISE_INSTRUMENTATION__){u=x.__PROMISE_INSTRUMENTATION__;U("instrument",!0);for(var Q in u)u.hasOwnProperty(Q)&&da(Q,u[Q])}A.RSVP={race:function(a,b){return l.race(a,b)},Promise:l,allSettled:function(a,b){return(new E(l,a,b)).promise},hash:function(a,b){return(new t(l,a,b)).promise},hashSettled:function(a,b){return(new G(l,a,b)).promise},denodeify:function(a,b){var c=function(){for(var c=arguments.length,e=Array(c+1),f,g=!1,h=0;h<c;++h){f=arguments[h];if(!g){if(f&&
"object"===typeof f){var k;if(f.constructor===l)k=!0;else try{k=f.then}catch(n){z.value=n,k=z}g=k}else g=!1;if(g===ha)return c=new l(r),m(c,ha.value),c;g&&!0!==g&&(f=ya(g,f))}e[h]=f}var v=new l(r);e[c]=function(a,c){if(a)m(v,a);else if(void 0===b)p(v,c);else if(!0===b){for(var d=arguments,e=d.length,f=Array(e-1),g=1;g<e;g++)f[g-1]=d[g];p(v,f)}else if(P(b)){for(var f=arguments,d={},g=f.length,e=Array(g),h=0;h<g;h++)e[h]=f[h];for(g=0;g<b.length;g++)f=b[g],d[f]=e[g+1];p(v,d)}else p(v,c)};return g?Aa(v,
e,a,this):za(v,e,a,this)};c.__proto__=a;return c},on:da,off:function(){h.off.apply(h,arguments)},map:function(a,b,c){return l.all(a,c).then(function(a){if(!C(b))throw new TypeError("You must pass a function as map's second argument.");for(var e=a.length,f=Array(e),g=0;g<e;g++)f[g]=b(a[g]);return l.all(f,c)})},filter:function(a,b,c){return l.all(a,c).then(function(a){if(!C(b))throw new TypeError("You must pass a function as filter's second argument.");for(var e=a.length,f=Array(e),g=0;g<e;g++)f[g]=
b(a[g]);return l.all(f,c).then(function(b){for(var c=Array(e),f=0,g=0;g<e;g++)b[g]&&(c[f]=a[g],f++);c.length=f;return c})})},resolve:function(a,b){return l.resolve(a,b)},reject:function(a,b){return l.reject(a,b)},all:function(a,b){return l.all(a,b)},rethrow:function(a){setTimeout(function(){throw a;});throw a;},defer:function(a){var b={};b.promise=new l(function(a,d){b.resolve=a;b.reject=d},a);return b},EventTarget:fa,configure:U,async:function(a,b){h.async(a,b)}};var Ca=H.head||H.getElementsByTagName("head")[0],
R=[],ia=function(a,b){try{return localStorage.setItem("pa-sis-omm-"+a,JSON.stringify(b)),!0}catch(e){if(0<=e.name.toUpperCase().indexOf("QUOTA")){var c,d=[];for(c in localStorage)0===c.indexOf("pa-sis-omm-")&&d.push(JSON.parse(localStorage[c]));if(d.length)return d.sort(function(a,b){return a.stamp-b.stamp}),basket.remove(d[0].key),ia(a,b)}}},Da=function(a){return new RSVP.Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a);d.onreadystatechange=function(){4===d.readyState&&(200===d.status||
0===d.status&&d.responseText?b({content:d.responseText,type:d.getResponseHeader("content-type")}):c(Error(d.statusText)))};setTimeout(function(){4>d.readyState&&d.abort()},basket.timeout);d.send()})},Ea=function(a){return Da(a.url).then(function(b){var c=+new Date;a.data=b.content;a.originalType=b.type;a.type=a.type||b.type;a.skipCache=a.skipCache||!1;a.stamp=c;a.expire=c+36E5*(a.expire||5E3);a.skipCache||ia(a.key,a);return a})},Fa=function(a){var b,c,d;if(a.url)return a.key=a.key||a.url,b=basket.get(a.key),
a.execute=!1!==a.execute,d=!b||0>b.expire-+new Date||a.unique>b.unique||basket.isValidItem&&!basket.isValidItem(b,a),a.live||d?(a.unique&&(a.url+=(0<a.url.indexOf("?")?"&":"?")+"basket-unique="+a.unique),c=Ea(a),a.live&&!d&&(c=c.then(function(a){return a},function(){return b}))):(b.type=a.type||b.originalType,b.execute=a.execute,c=new RSVP.Promise(function(a){a(b)})),c},L={"default":function(a){var b=H.createElement("script");b.defer=!0;b.text=a.data;Ca.appendChild(b)}},ja=function(a){return a.map(function(a){if(a.execute)if(a.type&&
L[a.type])L[a.type](a);else L["default"](a);return a})},ka=function(){var a,b,c=[];a=0;for(b=arguments.length;a<b;a++)c.push(Fa(arguments[a]));return RSVP.all(c)},la=function(){var a=ka.apply(null,arguments),b=this.then(function(){return a}).then(ja);b.thenRequire=la;return b};x.basket={require:function(){for(var a=0,b=arguments.length;a<b;a++)arguments[a].execute=!1!==arguments[a].execute,arguments[a].once&&0<=R.indexOf(arguments[a].url)?arguments[a].execute=!1:!1!==arguments[a].execute&&0>R.indexOf(arguments[a].url)&&
R.push(arguments[a].url);a=ka.apply(null,arguments).then(ja);a.thenRequire=la;return a},remove:function(a){localStorage.removeItem("pa-sis-omm-"+a);return this},get:function(a){a=localStorage.getItem("pa-sis-omm-"+a);try{return JSON.parse(a||"false")}catch(b){return!1}},clear:function(a){var b,c,d=+new Date;for(b in localStorage)(c=b.split("pa-sis-omm-")[1])&&(!a||this.get(c).expire<=d)&&this.remove(c);return this},isValidItem:null,timeout:5E3,addHandler:function(a,b){Array.isArray(a)||(a=[a]);a.forEach(function(a){L[a]=
b})},removeHandler:function(a){basket.addHandler(a,void 0)}};basket.clear(!0)})(this,document);